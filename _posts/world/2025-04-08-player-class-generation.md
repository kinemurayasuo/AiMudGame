# 🧬 플레이어 클래스 생성 로직 설계 (30턴 기준)

이 문서는 AI 스토리 게임에서 **30턴 전후에 자동으로 부여되는 플레이어 직업/정체성(Class)**의 생성 로직을 정리합니다.  
AI는 플레이어의 **선택 경향**, **성격(Trait)**, **대화 내용** 등을 분석하여 가장 어울리는 클래스명을 생성합니다.

---

## ⏱️ 생성 시점
- 30턴 도달 시 자동으로 클래스 분석 및 부여
- 단, 이전에 플레이어가 ‘강력한 정체성’을 드러내면 25~29턴에 사전 부여 가능

---

## 🔍 분석 기준 요소

| 요소 | 예시 | 분석 방식 |
|------|------|------------|
| 선택 경향 | 공격, 회피, 중립 | 비율 계산 (ex. 공격 70%) |
| Trait | "거짓말을 못함", "침묵" 등 | 프롬프트에 직접 반영 |
| 대화 어투 | 반말/존댓말, 질문형 등 | 톤/컨텍스트 분석 |
| 선택지 유형 | 감정/전략/도덕/혼돈 | 유형별 선택 비중 추적 |

---

## 🎭 클래스 이름 생성 규칙

- 반드시 **고유명사 + 상징 표현** 조합으로 구성 (TRPG 느낌 강조)

### 패턴 예시:
- "잿빛의 중재자"
- "침묵 속의 관찰자"
- "격류의 칼날"
- "망각을 품은 자"
- "말 없는 맹세자"
- "고요한 비명자"
- "웃는 자의 그림자"

---

## 🧠 AI 내부 클래스 생성 함수 예시 (Pseudocode)

```pseudocode
function generatePlayerClass(persona, logs, choices):
    aggression = calculateAggression(choices)
    empathy = calculateEmpathy(choices)
    chaos = calculateChaos(choices)
    
    if aggression > 0.7:
        return "격류의 칼날"
    if empathy > 0.6 and persona.trait == "정의로움":
        return "잿빛의 중재자"
    if chaos > 0.5:
        return "웃는 자의 그림자"
    if persona.trait.contains("침묵"):
        return "말 없는 맹세자"
    
    return "망각을 품은 자"  # 기본값
```

---

## 📢 AI 응답 방식 (턴 30 시)

```plaintext
“…사람들은 이제 너를 그렇게 부르기 시작했다.
잿빛의 중재자.

좋은 이름이군. 너는 그 이름에 걸맞은 존재가 될 수 있을까?”
```

- AI는 ‘부여’가 아니라 **‘자연스럽게 불리게 되었다’**는 형식으로 서술

---

## 🧱 클래스 저장 구조 예시

```json
{
  "turn": 30,
  "assignedClass": "망각을 품은 자",
  "assignmentReason": "공격성 낮고, 반복 선택이 많았음"
}
```

---

## 📝 향후 확장 가능 요소
- 클래스 부여 거부 루트 (AI가 이름을 제안했지만 플레이어가 부정)
- 동적 클래스 진화 시스템 (턴 100, 200에 명칭 변경)
- 클래스에 따른 선택지 변화 (특화 반응 문장 추가)

