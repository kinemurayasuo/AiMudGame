# AiMudGame κ°λ° μΌμ§€ λ° νΈλ¬λΈ”μν… μ •λ¦¬

## π“… λ‚ μ§: 2025-04-23

## β… μ¤λ μ§„ν–‰ν• μ‘μ—… μ”μ•½

### 1. **MySQL μ—°κ²° λ¬Έμ  ν•΄κ²°**
- μ²μ MySQL λΉ„λ°€λ²νΈ μ—†μ΄ μ„¤μΉν•μ—¬ `Access denied` μ—λ¬ λ°μƒ
- λΉ„λ°€λ²νΈ μ—†μ΄ μ ‘μ† κ°€λ¥ν• μƒνƒμ€μ (λ΅μ»¬ `root` κ³„μ •)
- μ΄ν›„ `mysql-connector-j` μ •μƒ μ—°κ²° ν™•μΈ

### 2. **JPAμ™€ Hibernate μ—λ¬ μ²λ¦¬**
#### β μ¤λ¥: `Could not determine recommended JdbcType for Java type 'Map<String, String>'`
- JPAκ°€ `Map` ν•„λ“λ¥Ό DBμ— μ–΄λ–»κ² μ €μ¥ν•΄μ•Ό ν• μ§€ λ¨λ¦„

#### β… ν•΄κ²° λ°©λ²•:
- `@Convert(converter = StringMapConverter::class)` μ‚¬μ©
- μ»¤μ¤ν…€ μ»¨λ²„ν„° `StringMapConverter` μ‘μ„±ν•μ—¬ `Map` <-> `String (JSON)` λ³€ν™ μ²λ¦¬

### 3. **List νƒ€μ…μ— λ€ν• μ§λ ¬ν™” μ²λ¦¬**
- `List<Skill>` `List<Passive>` κ°™μ€ ν•„λ“λ„ DBμ— μ €μ¥ λ¶κ°€ μ—λ¬ λ°μƒ

#### β… ν•΄κ²° λ°©λ²•:
- `ListConverter.SkillListConverter`, `ListConverter.PassiveListConverter` μ‘μ„±
- `@Convert(converter = ...)`μΌλ΅ κ°κ° λ…μ‹

### 4. **μ¤‘λ³µ μ–΄λ…Έν…μ΄μ… μ¤λ¥**
#### β μ¤λ¥: `@Entity` μ™€ `@Embeddable`μ„ λ™μ‹μ— μ„ μ–Έν•΄μ„ μ¶©λ λ°μƒ
- `Persona` ν΄λμ¤μ— λ‘ λ‹¤ μ„ μ–Έν•¨

#### β… ν•΄κ²° λ°©λ²•:
- `@Embeddable` μ κ±°, `@Entity`λ§ μ μ§€

### 5. **λ„λ©”μΈ νƒ€μ… λ¦¬ν©ν† λ§**
- μ¤‘λ³µ μ„ μ–Έ μ¤„μ΄κΈ° μ„ν•΄ typealias ν™μ©:
```kotlin
    typealias ElementMap = Map<String, String>
    typealias SkillList = List<Skill>
    typealias PassiveList = List<Passive>
```
- `Persona` ν΄λμ¤ ν•„λ“ κ°„κ²°ν•κ² λ¦¬ν©ν† λ§

### 6. **ν¨ν‚¤μ§€ κ²½λ΅ μ¤λ¥λ΅ μΈν• JPA μΈμ‹ λ¬Έμ **
#### β μ¤λ¥: `Not a managed type` (GameSession ν΄λμ¤)
- `JpaRepository`κ°€ `@Entity` ν΄λμ¤λ¥Ό μΈμ‹ν•μ§€ λ»ν•¨

#### β… ν•΄κ²° λ°©λ²•:
- λ„λ©”μΈ ν΄λμ¤ `GameSession`μ ν¨ν‚¤μ§€ κ²½λ΅λ¥Ό ν”„λ΅μ νΈ κΈ°μ¤€μ— λ§κ² μ •λ¦¬ (`com.taewoo.aimudgame.domain`)
- `@EntityScan`, `@EnableJpaRepositories` μ¤μ½”ν”„ ν™•μΈ

## π§ λ‹¤μ ν•  μΌ
- ν†µν•© ν…μ¤νΈ μ‹¤ν–‰ (`./gradlew test`)
- κΈ°λ¥λ³„ ν…μ¤νΈ ν΄λμ¤ μ •λ¦¬ λ° μ‘μ„±
- DBμ— μ €μ¥λλ” JSON λ¬Έμμ—΄ ν™•μΈ
- μ‹¤μ  λ°μ΄ν„° CRUD κΈ°λ¥ μ κ²€

---

## π”§ νΈλ¬λΈ”μν… μ”μ•½
| λ¬Έμ  | μ›μΈ | ν•΄κ²° λ°©λ²• |
|------|------|------------|
| MySQL μ—°κ²° μ‹¤ν¨ | λ“λΌμ΄λ²„ λ„λ½ or λΉ„λ°€λ²νΈ μ„¤μ • | `mysql-connector-j` μ¶”κ°€, λΉ„λ°€λ²νΈ ν™•μΈ |
| Map νƒ€μ… μ €μ¥ μ‹¤ν¨ | Hibernateκ°€ Mapμ„ μΈμ‹ λ»ν•¨ | `@Convert` + μ»¤μ¤ν…€ μ»¨λ²„ν„° μ‘μ„± |
| List νƒ€μ… μ €μ¥ μ‹¤ν¨ | κΈ°λ³Έ JPAμ—μ„ List νƒ€μ… μ €μ¥ λ¶κ°€ | `@Convert` + ListConverter μ‘μ„± |
| `@Entity` + `@Embeddable` λ™μ‹ μ„ μ–Έ | μλ»λ μ¤‘λ³µ μ–΄λ…Έν…μ΄μ… | `@Embeddable` μ κ±° |
| `Not a managed type` | μλ»λ ν¨ν‚¤μ§€ μ„μΉ | `@Entity` ν΄λμ¤ μ„μΉ μ΅°μ • + μ¤μΊ” μ„¤μ • |

---